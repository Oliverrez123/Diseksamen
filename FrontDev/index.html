<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" href="./board.css">
    <title>Kanban Board</title>
    <script>


    function drag(ev) {
        ev.dataTransfer.setData("text", ev.target.id);
    }

    function allowDrop(ev) {
        ev.preventDefault();
    }

    function drop(ev) {
        ev.preventDefault();
        var data = ev.dataTransfer.getData("text");
        ev.currentTarget.appendChild(document.getElementById(data));
    }

    function createTask(){
        var x = document.getElementById("igangvaerende");
        var y = document.getElementById("Færdig");
        var z = document.getElementById("lavnyopgaveblok");
        if (x.style.display === "none") {
            x.style.display = "block";
            y.style.display = "block";
            z.style.display = "none";
        } else {
            x.style.display = "none";
            y.style.display = "none";
            z.style.display = "flex";
        }
    }


    function gemOpg(){
     var skalGoeres = document.getElementById("skalGoeres");
        var opgaveNavn = document.getElementById("opgave-navn").value;
        skalGoeres.innerHTML += `
        <div class="task" id="${opgaveNavn.toLowerCase().split(" ").join("")}" draggable="true" ondragstart="drag(event)">
            <span>${opgaveNavn}</span>
        </div>`
          } 

    function changeOpg(){
        var saveButton = document.getElementById("gemknap");
        var editButton = document.getElementById("redigerknap");
        if (saveButton.style.display === "none") {
            saveButton.style.display = "block";
            editButton.style.display = "none";
        } else{
            saveButton.style.display = "none";
            editButton.style.display = "block";
        }
    }
   
    </script>
</head>
<body>
    <div class="container">
        <div class="kanbanheading">
            <p class="kanbantekst">Kanban Board</p>
        </div>
        <div class="kanban-board">
            <div class="kanban-block" id="skalGoeres" ondrop="drop(event)" ondragover="allowDrop(event)">
                <p>Skal gøres</p>
                <div class="opgknap-block">
                    <button id="opgknap" onclick="createTask()">Ny opgave</span>
                </div>
                <div class="task" id="task1" draggable="true" ondragstart="drag(event)">
                    <span>Task 1</span>
                </div>
            </div>
            <div class="kanban-block" id="igangvaerende" ondrop="drop(event)" ondragover="allowDrop(event)">
                <p>Igangværende</p>
            </div>
            <div class="kanban-block" id="Færdig" ondrop="drop(event)" ondragover="allowDrop(event)">
                <p>Færdig</p>
            </div>
            <div class="lavnyopgaveblok" id="lavnyopgaveblok">
                <p>New Task</p>
                <span class="inputraekke">
                    <label class="raekkeprint" for="opgave-navn">Task</label>
                    <input class="raekkeinput" type="text" name="opgave-navn" id="opgave-navn">
                </span>
                <span class="inputraekke">
                    <label class="raekkeprint" for="opgave-navn">Description</label>
                    <textarea class="raekkeinput" name="task-description" id="task-description" cols="52" rows="15"></textarea>
                </span>
                <span class="inputraekke">
                    <label class="raekkeprint" for="opgave-navn">Status</label>
                    <select class="raekkeinput" name="task-status" id="task-status">
                        <option value="skalGoeres">Skal gøres</option>
                        <option value="igangvaerende">Igangværende</option>
                        <option value="Færdig">Færdig</option>
                    </select>
                </span>
                <span class="raekkeknapns">
                    <button id="redigerknap" onclick="changeOpg()"></span>
                    <button id="gemknap" onclick="gemOpg()">Save</span>
                    <button id="tilbageknap" onclick="createTask()">Cancel</span>
                </span>
            </div>
        </div>
    </div>
</body>
</html>